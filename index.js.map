{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport function createMarkUp(images) {\n  \n  return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n      `\n      <li class=\"wrap-card\">\n        <a class=\"link-card\" href=\"${largeImageURL}\">\n          <img class=\"photo-card\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <div class=\"info\">\n          <div class=\"wrap-text\">\n            <p><b>Likes</b> ${likes}</p>\n          </div>\n          <div class=\"wrap-text\">\n            <p><b>Views</b> ${views}</p>\n          </div>\n          <div class=\"wrap-text-two\">\n            <p><b>Comments</b> ${comments}</p>\n          </div>\n          <div class=\"wrap-text-two\">\n            <p><b>Downloads</b> ${downloads}</p>\n          </div>\n        </div>\n      </li>\n      `).join('');\n  }\n\n\n","import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/';\n\nconst MY_API_KEY = '48269071-e04b626909c4b310c40a55ae0';\n\nexport async function fetchImages (searchValue, page = 1) \n    {\n   try {\n    const response = await\n      axios.get(baseURL, {\n\n      params: {\n        key: MY_API_KEY,\n        q: searchValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 20,\n       \n        },\n\n    }   \n  );\n\n    return response.data;\n\n   }   \n     catch (error) {\n    console.error('Error fetching images:', error.message);\n     throw error;\n\n   }\n  \n}; \n    ","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast  from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Додатковий імпорт стилів\nimport { createMarkUp } from \"./js/render-functions\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\n\n\n// Ищим форму по селектору :\nconst form = document.querySelector('.form');\nform.classList.add('form');\n// Ищим инпут:\nconst input = document.querySelector('.input');\n// Теперь кнопочки только одна динамичная:\n\nconst loadMoreButton = document.createElement(\"button\");\n\n// Индикатор для первой кнопки:\n\nconst firstLoader = document.createElement(\"div\");\nfirstLoader.textContent = \"Loading images, please wait...\";\nfirstLoader.classList.add(\"first-loader\");\nfirstLoader.style.display = \"none\";\n\n\n\n// Настройки кнопки \"LoadMore\":\nloadMoreButton.type = \"button\";\nloadMoreButton.textContent = \"LoadMore\";\nloadMoreButton.id = \"load-more\";\nloadMoreButton.style.display = \"none\";\nloadMoreButton.classList.add(\"load-more\");\n\n\ndocument.body.appendChild(loadMoreButton);\n\n\n// Контейнер для галереи:\nconst gallery = document.createElement(\"div\");\ngallery.id = \"gallery\";\ndocument.body.appendChild(gallery);\nconst photoList = document.createElement('ul');\n\n\n// Настройка lightbox:\nlet lightbox = new SimpleLightbox(\"#gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n// Начальная стадия страниц:\n\nlet page = 1;\nlet limit = 20;\n\n// Данные для НТТР запроса перед самом запросом:\n\nform.addEventListener(\"submit\", async (event) => {\n\n  loadMoreButton.style.display = \"none\"\n\n  event.preventDefault();  \n\n  // Показать индикатор\n  firstLoader.style.display = 'block';\n\n\n  setTimeout(() => {\n\n    gallery.style.display = \"block\";\n\n    firstLoader.style.display = 'none';\n\n  } , 30000);\n  \n  const searchValue = input.value.trim();\n\n     if (!searchValue) {\n       iziToast.show({\n         title: \"Error\",\n         message: \"These fields are empty, please, fill these all!\",\n       color: \"red\",})\n       firstLoader.style.display = 'none';\n       return;\n  };\n   \n  try {\n    page = 1;\n    const data = await fetchImages(searchValue, page);\n      \n      // Дані від бекенда\n        if (data.hits.length === 0) {\n            iziToast.show({\n              title: \"Error\",\n              message: \"Sorry, there are no any matching your search query. Please try again!\",\n              color: \"red\",\n        });\n        firstLoader.style.display = \"none\";\n      return ; \n       }\n\n     gallery.innerHTML = ''; \n     photoList.insertAdjacentHTML(\"beforeend\", createMarkUp(data.hits));\n     gallery.append(photoList);\n  \n\n     if (data.totalHits > page * limit) {\n\n       loadMoreButton.style.display = \"block\";\n       gallery.insertAdjacentElement(\"afterend\", loadMoreButton);\n\n     }\n\n     lightbox.refresh();\n\n     \n\t\t} catch(error)  {\n\n      console.error(error);\n\n    } finally {\n\n      firstLoader.style.display = \"none\";\n    }\n\n  });\n     \n    loadMoreButton.addEventListener (\"click\", async () => {\n\n      page += 1;\n\n      // Показываем индикатор загрузки\n    const loader = document.querySelector(\".loader\"); // Используем селектор\n    loader.style.display = \"block\"; // Показываем индикатор\n    loadMoreButton.disabled = true; // Отключаем кнопку во время загрузки\n\n\n     setTimeout(() => {\n\n      gallery.style.display = \"block\";\n      loadMoreButton.disabled = true;\n   \n  \n    } , 30000);\n    \n\n  \n      try {\n\n     const data = await \n      fetchImages(input.value.trim(), page);\n    \n      photoList.insertAdjacentHTML(\"beforeend\", createMarkUp(data.hits));\n      gallery.append(photoList);\n\n      lightbox.refresh();\n\n\n     // Прокручиваем так, чтобы кнопка Load More оставалась в зоне видимости\n        const galleryRect = gallery.getBoundingClientRect();\n        window.scrollBy({\n            top: galleryRect.height / 2, // Прокручиваем на половину высоты галереи\n            behavior: \"smooth\"\n        });\n        \n\n      // Если мы достигли лимита изображений:\n\n      if (data && data.totalHits <= page * limit) {\n\n           loadMoreButton.style.display = \"none\";\n             iziToast.show({\n                title: \"Error\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color:\"blue\",\n              });\n         }\n     \n    } catch (error) {\n\n       console.error(error); \n\n    } finally {\n\n      // Скрываем индикатор загрузки и разблокируем кнопку\n      loader.style.display = \"none\"; // Скрываем индикатор\n      loadMoreButton.disabled = false;\n  \n   }    \n  });\n    "],"names":["createMarkUp","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","baseURL","MY_API_KEY","fetchImages","searchValue","page","axios","error","form","input","loadMoreButton","firstLoader","gallery","photoList","lightbox","SimpleLightbox","limit","event","iziToast","data","loader","galleryRect"],"mappings":"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"}