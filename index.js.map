{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport function createMarkUp(images) {\n  \n  return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n      `\n      <li class=\"wrap-card\">\n        <a class=\"link-card\" href=\"${largeImageURL}\">\n          <img class=\"photo-card\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <div class=\"info\">\n          <div class=\"wrap-text\">\n            <p><b>Likes</b> ${likes}</p>\n          </div>\n          <div class=\"wrap-text\">\n            <p><b>Views</b> ${views}</p>\n          </div>\n          <div class=\"wrap-text-two\">\n            <p><b>Comments</b> ${comments}</p>\n          </div>\n          <div class=\"wrap-text-two\">\n            <p><b>Downloads</b> ${downloads}</p>\n          </div>\n        </div>\n      </li>\n      `).join('');\n  }\n\n\n","import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/';\n\nconst MY_API_KEY = '48269071-e04b626909c4b310c40a55ae0';\n\nexport async function fetchImages (searchValue, page = 1) \n    {\n   try {\n    const response = await\n      axios.get(baseURL, {\n\n      params: {\n        key: MY_API_KEY,\n        q: searchValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 20,\n       \n        },\n\n    }   \n  );\n\n    return response.data;\n\n   }   \n     catch (error) {\n    console.error('Error fetching images:', error.message);\n     throw error;\n\n   }\n  \n}; \n    ","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast  from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Додатковий імпорт стилів\nimport { createMarkUp } from \"./js/render-functions\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\n\n// Создаю форму :\nconst form = document.createElement('form');\nform.classList.add('form');\n// Создаю инпут:\nconst input = document.createElement('input');\n// Теперь кнопочки:\nconst searchButton = document.createElement(\"button\");\nsearchButton.classList.add(\"searchButton\");\nconst loadMoreButton = document.createElement(\"button\");\n// Стили для инпута:\ninput.classList.add('input');\ninput.type = 'text';\ninput.name = 'search';\ninput.placeholder = 'Enter search query...';\ninput.style.marginRight = \"10px\";\n\n\n// Настройки кнопки поиска :\nsearchButton.type = \"submit\";\nsearchButton.textContent = \"Search\";\nsearchButton.style.marginRight = \"10px\";\n\n// Индикатор для первой кнопки:\n\nconst firstLoader = document.createElement(\"div\");\nfirstLoader.textContent = \"Loading images, please wait...\";\nfirstLoader.classList.add(\"first-loader\");\nfirstLoader.style.display = \"none\";\n\n\nsearchButton.insertAdjacentElement(\"beforeend\", firstLoader);\n\n// Настройки кнопки \"LoadMore\":\nloadMoreButton.type = \"button\";\nloadMoreButton.textContent = \"LoadMore\";\nloadMoreButton.id = \"load-more\";\nloadMoreButton.style.display = \"none\";\nloadMoreButton.classList.add(\"load-more\");\n\n\n\n// Индикатор для второй кнопки!!!\n\nconst loader = document.createElement(\"div\");\nloader.textContent = \"Loading images, please wait...\";\nloader.classList.add(\"loader\");\nloader.style.display = \"none\";\n\ndocument.body.appendChild(loadMoreButton);\n\nloadMoreButton.insertAdjacentElement(\"beforeend\", loader);\n\n\n// Добавление єлементов в форму:\nform.appendChild(input);\nform.appendChild(searchButton);\n\n\n// Добавляю форму в DOM:\n\ndocument.body.appendChild(form);\n// Выравниваю элементы по горизонтали\n\nform.style.alignItems = \"center\";\nform.style.position = \"fixed\";\nform.style.top = \"50px\";\nform.style.left = \"50%\";\nform.style.transform = \"translate(-50%, -50%)\";\nform.style.justifyContent = \"center\";\nform.style.gap = \"10px\"\n\n\n\n// контейнер для галереи:\nconst gallery = document.createElement(\"div\");\ngallery.id = \"gallery\";\ndocument.body.appendChild(gallery);\nconst photoList = document.createElement('ul');\n\n\n// Настройка lightbox:\nlet lightbox = new SimpleLightbox(\"#gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n// Начальная стадия страниц:\n\nlet page = 1;\nlet limit = 15;\n\n// Данные для НТТР запроса перед самом запросом:\n\nform.addEventListener(\"submit\", async (event) => {\n\n  loadMoreButton.style.display = \"none\"\n\n  event.preventDefault();  \n\n  // Показать индикатор\n  firstLoader.style.display = 'block';\n\n\n  setTimeout(() => {\n\n    gallery.style.display = \"block\";\n\n    firstLoader.style.display = 'none';\n\n  } , 30000);\n  \n  const searchValue = input.value.trim();\n\n     if (!searchValue) {\n       iziToast.show({\n         title: \"Error\",\n         message: \"These fields are empty, please, fill these all!\",\n       color: \"red\",})\n       firstLoader.style.display = 'none';\n       return;\n  };\n   \n  try {\n    page = 1;\n    const data = await fetchImages(searchValue, page);\n      \n      // Дані від бекенда\n        if (data.hits.length === 0) {\n            iziToast.show({\n              title: \"Error\",\n              message: \"Sorry, there are no any matching your search query. Please try again!\",\n              color: \"red\",\n        });\n        firstLoader.style.display = \"none\";\n      return ; \n       }\n\n     gallery.innerHTML = ''; \n     photoList.insertAdjacentHTML(\"beforeend\", createMarkUp(data.hits));\n     gallery.append(photoList);\n  \n\n     if (data.totalHits > page * limit) {\n\n       loadMoreButton.style.display = \"block\";\n       gallery.insertAdjacentElement(\"afterend\", loadMoreButton);\n\n     }\n\n     lightbox.refresh();\n\n     const newImages = photoList.querySelectorAll(\"li\");\n\n     if (newImages.length > 0) {\n\n   const {height} = \n      newImages[newImages.length - data.hits.length].getBoundingClientRect();\n            window.scrollBy({\n               top: height * 2,\n              behavior: \"smooth\"\n                  });\n             }\n     \n\t\t} catch(error)  {\n\n      console.error(error);\n\n    } finally {\n\n      firstLoader.style.display = \"none\";\n    }\n\n  });\n     \n    loadMoreButton.addEventListener (\"click\", async () => {\n\n      let data;\n\n      page += 1;\n\n      // Показать индикатор\n     \n     loader.style.display = \"block\";\n     loader.textContent = \"Loading images, please wait...\";\n     loadMoreButton.disabled = true;\n\n     setTimeout(() => {\n\n      gallery.style.display = \"block\";\n      loadMoreButton.disabled = true;\n      loader.style.display = 'none';\n  \n    } , 30000);\n    \n\n  \n      try {\n\n     const data = await \n      fetchImages(input.value.trim(), page);\n    \n      photoList.insertAdjacentHTML(\"beforeend\", createMarkUp(data.hits));\n      gallery.append(photoList);\n\n      lightbox.refresh();\n\n      // Высота карточки:\n\n\n\n      // Если мы достигли лимита изображений:\n\n      if (data && data.totalHits <= page * limit) {\n\n           loadMoreButton.style.display = \"none\";\n             iziToast.show({\n                title: \"Error\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color:\"blue\",\n              });\n         }\n     \n    } catch (error) {\n\n       console.error(error); \n\n    } finally {\n\n    loader.style.display = \"none\";\n    loadMoreButton.disabled = false;\n  \n   }    \n  });\n    "],"names":["createMarkUp","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","baseURL","MY_API_KEY","fetchImages","searchValue","page","axios","error","form","input","searchButton","loadMoreButton","firstLoader","loader","gallery","photoList","lightbox","SimpleLightbox","limit","event","iziToast","data","newImages","height"],"mappings":"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"}